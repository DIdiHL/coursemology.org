<% published_market_tab_id = 'published_market_tab' %>
<% purchase_history_tab_id = 'purchase_history_tab' %>
<% default_tab_id = published_market_tab_id %>

<ul id="my_marketplace_created_course_setting_tabs" class="nav nav-tabs ajax-nav-tabs">

  <li class="<%= check_tab_status(published_market_tab_id, default_tab_id) %>">
    <%= link_to t('Marketplace.my_marketplace_courses_settings.published_markets_tab_label'),
                my_marketplace_course_published_markets_path(@course),
                remote: true,
                'data-target' => published_market_tab_id %>
  </li>

  <li class="<%= check_tab_status(purchase_history_tab_id, default_tab_id) %>">
    <%= link_to t('Marketplace.my_marketplace_courses_settings.purchase_history_tab_label'),
                my_marketplace_course_purchase_history_path(@course),
                remote: true,
                'data-target' => purchase_history_tab_id %>
  </li>

</ul>

<div class="tab-content">

  <!-- This is a common notice area, it is intended to notice the user the result of previous operations even after tab is changed -->
  <% if flash[:notice] %>
    <!-- TODO modify to use ajax -->
    <div class="alert alert-success">
      <%= flash[:notice].html_safe %>
    </div>
  <% end %>
  <% if flash[:error] %>
    <div class="alert alert-error">
      <%= flash[:error].html_safe %>
    </div>
  <% end %>

  <div id="<%= published_market_tab_id %>" class="tab-pane <%= check_tab_status(published_market_tab_id, default_tab_id) %>">
    <%= render partial: 'published_markets', locals: {course: @course} %>
  </div>

  <div id="<%= purchase_history_tab_id %>" class="tab-pane <%= check_tab_status(purchase_history_tab_id, default_tab_id) %>">
    <%= render partial: 'purchase_history', locals: {course: @course} %>
  </div>
</div>